(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 10.0' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[      6004,        145]
NotebookOptionsPosition[      5567,        126]
NotebookOutlinePosition[      5919,        142]
CellTagsIndexPosition[      5876,        139]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{
Cell[BoxData[
 RowBox[{"dev", "=", 
  RowBox[{"DeviceOpen", "[", 
   RowBox[{"\"\<Serial\>\"", ",", 
    RowBox[{"{", 
     RowBox[{"\"\</dev/cu.usbserial-A6024CMA\>\"", ",", 
      RowBox[{"\"\<BaudRate\>\"", "\[Rule]", "115200"}]}], "}"}]}], 
   "]"}]}]], "Input",
 CellChangeTimes->{{3.617677556854624*^9, 3.617677558286501*^9}, {
  3.617677642842619*^9, 3.6176776574351397`*^9}, {3.6178530196434107`*^9, 
  3.617853030777581*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"data", "=", 
   RowBox[{"{", "}"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.617836846324233*^9, 3.617836863792412*^9}, {
  3.617837378007373*^9, 3.6178373799179363`*^9}, {3.617839513528846*^9, 
  3.617839514027254*^9}, {3.617839847776031*^9, 3.6178398492424917`*^9}, {
  3.617840050094598*^9, 3.6178400538448133`*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"volt", "=", 
   RowBox[{"{", "}"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.617839866591298*^9, 3.617839886185807*^9}}],

Cell[BoxData[
 RowBox[{"task", "=", 
  RowBox[{"RunScheduledTask", "[", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"If", "[", 
     RowBox[{
      RowBox[{"DeviceExecute", "[", 
       RowBox[{"dev", ",", "\"\<SerialReadyQ\>\""}], "]"}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{"Module", "[", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{"csv", ",", "raw"}], "}"}], ",", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"csv", "=", 
          RowBox[{"FromCharacterCode", "[", 
           RowBox[{"DeviceReadBuffer", "[", "dev", "]"}], "]"}]}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"raw", "=", 
          RowBox[{"Flatten", "[", 
           RowBox[{"Cases", "[", 
            RowBox[{
             RowBox[{"ImportString", "[", 
              RowBox[{"csv", ",", "\"\<CSV\>\""}], "]"}], ",", 
             RowBox[{"{", "_Real", "}"}]}], "]"}], "]"}]}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"volt", "=", 
          RowBox[{"ToExpression", "[", 
           RowBox[{"raw", ",", "TraditionalForm"}], "]"}]}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"data", "=", 
          RowBox[{"Join", "[", 
           RowBox[{"data", ",", "volt"}], "]"}]}], ";"}]}], 
       "\[IndentingNewLine]", "]"}]}], "]"}], ",", "\[IndentingNewLine]", 
    "0.2"}], "\[IndentingNewLine]", "]"}]}]], "Input",
 CellChangeTimes->{{3.617677697889103*^9, 3.617677708113969*^9}, {
   3.6176809937777243`*^9, 3.617680997763239*^9}, {3.617681086546021*^9, 
   3.617681091341304*^9}, {3.617681222005712*^9, 3.617681302408601*^9}, {
   3.617681546423579*^9, 3.6176815470847683`*^9}, {3.61768167910553*^9, 
   3.6176816896011457`*^9}, 3.6176818815073566`*^9, {3.617761978424268*^9, 
   3.617761979297904*^9}, {3.617762759042883*^9, 3.61776277978194*^9}, {
   3.617832224174101*^9, 3.617832230772862*^9}, {3.6178323295129423`*^9, 
   3.61783235085465*^9}, {3.617832420207799*^9, 3.617832457520049*^9}, {
   3.617833016727536*^9, 3.617833021106551*^9}, {3.6178330938699293`*^9, 
   3.617833096762701*^9}, {3.6178331577156467`*^9, 3.61783316787644*^9}, {
   3.6178332904031687`*^9, 3.617833332804121*^9}, {3.6178333891188307`*^9, 
   3.617833391845963*^9}, {3.617833455267624*^9, 3.617833474058146*^9}, {
   3.617833597700152*^9, 3.6178336034825907`*^9}, {3.617833750867937*^9, 
   3.617833755296163*^9}, {3.6178338090137463`*^9, 3.617833825671012*^9}, {
   3.6178338659532146`*^9, 3.617833883539339*^9}, {3.6178339477381268`*^9, 
   3.617833948264227*^9}, {3.6178341973439198`*^9, 3.6178341999469*^9}, 
   3.61783424724662*^9, {3.6178342952202044`*^9, 3.617834298244548*^9}, {
   3.6178368681207952`*^9, 3.6178368983930693`*^9}, {3.6178369431184187`*^9, 
   3.6178370081901903`*^9}, 3.61783721295682*^9, {3.6178378973028717`*^9, 
   3.6178379004092817`*^9}, {3.617837953297668*^9, 3.6178379578488483`*^9}, {
   3.617838333365302*^9, 3.617838392887929*^9}, {3.617838429614868*^9, 
   3.617838520650907*^9}, 3.617839085405611*^9, {3.617839216488044*^9, 
   3.617839220489305*^9}, {3.617839594032155*^9, 3.617839594665414*^9}, {
   3.617839684970701*^9, 3.617839689513585*^9}, {3.617839745348772*^9, 
   3.617839749110303*^9}, {3.617839890194667*^9, 3.617839894706444*^9}, {
   3.617839941727412*^9, 3.61783994217666*^9}, {3.617842580226922*^9, 
   3.617842586352873*^9}, {3.6178426472060204`*^9, 3.617842657384056*^9}, {
   3.6178427559928293`*^9, 3.617842767614146*^9}, {3.617851933619116*^9, 
   3.6178519579572697`*^9}}],

Cell[BoxData[
 RowBox[{"Print", "[", 
  RowBox[{"Dynamic", "[", "volt", "]"}], "]"}]], "Input",
 CellChangeTimes->{{3.617839629082756*^9, 3.617839643637002*^9}, {
  3.617839726743532*^9, 3.617839753381627*^9}, {3.617840013199606*^9, 
  3.617840013883874*^9}}],

Cell[BoxData[
 RowBox[{"Dynamic", "[", 
  RowBox[{"ListLinePlot", "[", "data", "]"}], "]"}]], "Input",
 CellChangeTimes->{{3.617852434229165*^9, 3.6178524661271467`*^9}, {
  3.617852525813521*^9, 3.6178525280329723`*^9}, {3.617852565261138*^9, 
  3.617852568738214*^9}, {3.617852693281281*^9, 3.6178527001820993`*^9}}]
},
WindowSize->{808, 668},
WindowMargins->{{4, Automatic}, {Automatic, 4}},
FrontEndVersion->"10.0 for Mac OS X x86 (32-bit, 64-bit Kernel) (June 27, \
2014)",
StyleDefinitions->"Default.nb"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[558, 20, 434, 10, 28, "Input"],
Cell[995, 32, 354, 7, 28, "Input"],
Cell[1352, 41, 155, 4, 28, "Input"],
Cell[1510, 47, 3470, 63, 182, "Input"],
Cell[4983, 112, 259, 5, 28, "Input"],
Cell[5245, 119, 318, 5, 28, "Input"]
}
]
*)

(* End of internal cache information *)
